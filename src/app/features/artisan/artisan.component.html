<mat-form-field class="app-width-100">
  <mat-label>Search item</mat-label>
  <input matInput type="text" placeholder="Type in..." [matAutocomplete]="auto" [formControl]="searchItem">
  <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" [displayWith]="itemNameFn">
    @for (item of searchItems(); track item.id) {
    <mat-option [value]="item">
      <mat-icon>
        <img [nwIcon]="item" class="mat-img" loading="lazy">
      </mat-icon>
      {{item.name}}
    </mat-option>
    }
  </mat-autocomplete>
</mat-form-field>
<div class="recipe-selector app-mb-1r app-mt-1r app-width-100 app-height-100">
  @if (!artisan.loading()) {
  @if (artisan.product(); as product) {
  <div #container class="app-l-flex app-l-flex-row app-l-flex-gap-6r">
    @for (stage of product.materials.stages() | keyvalue; track stage.key) {
    <div class="app-l-flex app-l-flex-column app-l-flex-gap-1r">
      @for (entity of stage.value; track entity.id) {
      <entity component [id]="entity.id" [data]="entity"></entity>
      }
    </div>
    }
  </div>
  }
  } @else {
  <mat-progress-bar mode="query"></mat-progress-bar>
  }
</div>
